{"remainingRequest":"C:\\Users\\tamer\\Desktop\\MAIN\\Main2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\tamer\\Desktop\\MAIN\\Main2\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\Main2\\src\\store\\modules\\auth.js","mtime":1625895140217},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\Main2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\Main2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBBcGkgZnJvbSAiQC9zZXJ2aWNlLyI7CmV4cG9ydCB2YXIgbmFtZXNwYWNlZCA9IHRydWU7CmV4cG9ydCB2YXIgc3RhdGUgPSB7CiAgYXV0aDogewogICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyLXRva2VuIikgfHwgbnVsbAogIH0KfTsKZXhwb3J0IHZhciBnZXR0ZXJzID0gewogIGlzTm90QXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNOb3RBdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICByZXR1cm4gIXN0YXRlLmF1dGgudG9rZW47CiAgfQp9OwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyLXRva2VuIiwgdG9rZW4pOwogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIENMRUFSX1RPS0VOOiBmdW5jdGlvbiBDTEVBUl9UT0tFTihzdGF0ZSkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXItdG9rZW4iKTsKICAgIHN0YXRlLnRva2VuID0gbnVsbDsKICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgZGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgIGRpc3BhdGNoKCJzZXRfbG9hZGluZyIsIHRydWUsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBBcGkubG9naW4oZGF0YSkudGhlbihmdW5jdGlvbiAodG9rZW4pIHsKICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsIHRva2VuKTsKICAgICAgICBkaXNwYXRjaCgidXNlci9zZXRfdXNlcl9kYXRhIiwgbnVsbCwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBkaXNwYXRjaCgic2V0X2xvYWRpbmciLCBmYWxzZSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKF9yZWYyLCBkYXRhKSB7CiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgIGRpc3BhdGNoKCJzZXRfbG9hZGluZyIsIHRydWUsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBBcGkucmVnaXN0ZXIoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgZGlzcGF0Y2goInNldF9sb2FkaW5nIiwgZmFsc2UsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBkaXNwYXRjaCgic2V0X2xvYWRpbmciLCBmYWxzZSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHJlamVjdChlcnIuc3RhdHVzKTsKICAgICAgfSk7IC8vIGF4aW9zLnBvc3QoJ2F1dGgvcmVnaXN0ZXInLCBkYXRhKQogICAgICAvLyAgIC50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgICAvLyBkaXNwYXRjaCgidXNlci9zZXRfdXNlcl9kYXRhIiwgcmVzLmRhdGEudXNlciwgeyByb290OiB0cnVlIH0pOwogICAgICAvLyAgICAgLy8gYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXSA9IHJlcy5kYXRhLnRva2VuOwogICAgICAvLyAgICAgLy8gY29tbWl0KCJTRVRfVE9LRU4iLCByZXMuZGF0YS50b2tlbik7CiAgICAgIC8vICAgICBkaXNwYXRjaCgic2V0X2xvYWRpbmciLCBmYWxzZSwgeyByb290OiB0cnVlIH0pOwogICAgICAvLyAgICAgcmVzb2x2ZShyZXMpCiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goZXJyID0+IHsKICAgICAgLy8gICAgIGRpc3BhdGNoKCJzZXRfbG9hZGluZyIsIGZhbHNlLCB7IHJvb3Q6IHRydWUgfSk7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UpCiAgICAgIC8vICAgICAvLyBkaXNwYXRjaCgic2V0X2xvYWRpbmciLCBmYWxzZSwgeyByb290OiB0cnVlIH0pOwogICAgICAvLyAgICAgcmVqZWN0KGVycikKICAgICAgLy8gICB9KQogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgY29tbWl0KCJDTEVBUl9UT0tFTiIpOwogICAgQXBpLmxvZ291dCgpOwogICAgZGlzcGF0Y2goInVzZXIvY2xlYXJfdXNlcl9kYXRhIiwgbnVsbCwgewogICAgICByb290OiB0cnVlCiAgICB9KTsKICB9LAogIHF1ZXJ5X3RvX3Jlc2V0X3Bhc3N3b3JkOiBmdW5jdGlvbiBxdWVyeV90b19yZXNldF9wYXNzd29yZChfcmVmNCwgZGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgcmV0dXJuIEFwaS5zZW50X3F1ZXJ5X3RvX3Jlc2V0X3Bhc3N3b3JkKGRhdGEpLnRoZW4oZnVuY3Rpb24gKF9yZWY1KSB7CiAgICAgIHZhciB0b2tlbiA9IF9yZWY1LmRhdGEudG9rZW47CiAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgdG9rZW4pOwogICAgICBkaXNwYXRjaCgic2hvd19tb2RhbCIsICJjaGVjayIpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKF9yZWY2KSB7CiAgICAgIHZhciByZXNwb25zZSA9IF9yZWY2LnJlc3BvbnNlOwogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICB9KTsKICB9LAogIHJlc2V0X3Bhc3N3b3JkOiBmdW5jdGlvbiByZXNldF9wYXNzd29yZChfcmVmNywgZGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY3LmRpc3BhdGNoOwogICAgcmV0dXJuIEFwaS5yZXNldF9wYXNzd29yZChkYXRhKS50aGVuKGZ1bmN0aW9uIChfcmVmOCkgewogICAgICB2YXIgdG9rZW4gPSBfcmVmOC5kYXRhLnRva2VuOwogICAgICBjb21taXQoIlNFVF9UT0tFTiIsIHRva2VuKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfcmVmOSkgewogICAgICB2YXIgZXJyb3IgPSBfcmVmOS5yZXNwb25zZS5kYXRhLmVycm9yOwogICAgICBkaXNwYXRjaCgiZXJyb3JfaGFuZGxlciIsIHsKICAgICAgICB0eXBlOiAiZGFuZ2VyIiwKICAgICAgICB0ZXh0OiBlcnJvciB8fCAi0KfRgtC+INGC0L4g0L/QvtGI0LvQviDQvdC1INGC0LDQui4g0J/QvtC/0YDQvtCx0YPQudGC0LUg0LXRidC1INGA0LDQtyEiCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfSk7CiAgfSwKICB2ZXJpZmljYXRpb25fZW1haWw6IGZ1bmN0aW9uIHZlcmlmaWNhdGlvbl9lbWFpbChfcmVmMTAsIHRva2VuKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjEwLmNvbW1pdDsKICAgIHJldHVybiBBcGkudmVyaWZpY2F0aW9uX2VtYWlsKHRva2VuKS50aGVuKGZ1bmN0aW9uIChfcmVmMTEpIHsKICAgICAgdmFyIHRva2VuID0gX3JlZjExLmRhdGEudG9rZW47CiAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgdG9rZW4pOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/tamer/Desktop/MAIN/Main2/src/store/modules/auth.js"],"names":["Api","namespaced","state","auth","token","localStorage","getItem","getters","isNotAuthenticated","mutations","SET_TOKEN","setItem","CLEAR_TOKEN","removeItem","actions","login","data","commit","dispatch","root","Promise","resolve","reject","then","catch","err","register","res","status","logout","query_to_reset_password","sent_query_to_reset_password","response","console","log","reset_password","error","type","text","verification_email"],"mappings":"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","sourcesContent":["import Api from \"@/service/\";\nexport const namespaced = true;\n\nexport const state = {\n  auth: {\n    token: localStorage.getItem(\"user-token\") || null\n  }\n};\n\nexport const getters = {\n  isNotAuthenticated: state => !state.auth.token\n};\n\nexport const mutations = {\n  SET_TOKEN(state, token) {\n    localStorage.setItem(\"user-token\", token);\n    state.token = token;\n  },\n  CLEAR_TOKEN(state) {\n    localStorage.removeItem(\"user-token\");\n    state.token = null;\n  }\n};\n\nexport const actions = {\n  login({ commit, dispatch }, data) {\n    dispatch(\"set_loading\", true, { root: true });\n    return new Promise((resolve, reject) => {\n      Api.login(data)\n        .then(token => {\n          commit(\"SET_TOKEN\", token);\n          dispatch(\"user/set_user_data\", null, { root: true }).then(data => {\n            resolve(data);\n          });\n        })\n        .catch(err => {\n          dispatch(\"set_loading\", false, { root: true });\n          reject(err);\n        });\n    });\n  },\n  register({ dispatch }, data) {\n    dispatch(\"set_loading\", true, { root: true });\n    return new Promise((resolve, reject) => {\n      Api.register(data)\n        .then(res => {\n          dispatch(\"set_loading\", false, { root: true });\n          resolve(res);\n        })\n        .catch(err => {\n          dispatch(\"set_loading\", false, { root: true });\n          reject(err.status);\n        });\n      // axios.post('auth/register', data)\n      //   .then(res => {\n      //     // dispatch(\"user/set_user_data\", res.data.user, { root: true });\n      //     // axios.defaults.headers.common[\"Authorization\"] = res.data.token;\n      //     // commit(\"SET_TOKEN\", res.data.token);\n      //     dispatch(\"set_loading\", false, { root: true });\n      //     resolve(res)\n      //   })\n      //   .catch(err => {\n      //     dispatch(\"set_loading\", false, { root: true });\n      //     console.log(err.response)\n      //     // dispatch(\"set_loading\", false, { root: true });\n      //     reject(err)\n      //   })\n    });\n  },\n  logout({ commit, dispatch }) {\n    commit(\"CLEAR_TOKEN\");\n    Api.logout();\n    dispatch(\"user/clear_user_data\", null, { root: true });\n  },\n  query_to_reset_password({ commit, dispatch }, data) {\n    return Api.sent_query_to_reset_password(data)\n      .then(({ data: { token } }) => {\n        commit(\"SET_TOKEN\", token);\n        dispatch(\"show_modal\", \"check\");\n      })\n      .catch(({ response }) => {\n        console.log(response);\n      });\n  },\n  reset_password({ commit, dispatch }, data) {\n    return Api.reset_password(data)\n      .then(({ data: { token } }) => {\n        commit(\"SET_TOKEN\", token);\n      })\n      .catch(\n        ({\n          response: {\n            data: { error }\n          }\n        }) => {\n          dispatch(\n            \"error_handler\",\n            {\n              type: \"danger\",\n              text: error || \"Что то пошло не так. Попробуйте еще раз!\"\n            },\n            { root: true }\n          );\n        }\n      );\n  },\n  verification_email({ commit }, token) {\n    return Api.verification_email(token).then(({ data: { token } }) => {\n      commit(\"SET_TOKEN\", token);\n    });\n  }\n};\n"]}]}