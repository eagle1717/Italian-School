{"remainingRequest":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\src\\views\\TeacherPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\src\\views\\TeacherPage.vue","mtime":1625895133891},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUZWFjaGVyQ2FyZCBmcm9tICJAL2NvbXBvbmVudHMvVGVhY2hlckNhcmQudnVlIjsKaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBOb3RpZmljYXRpb25zIGZyb20gIi4uL2NvbXBvbmVudHMvTm90aWZpY2F0aW9ucyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGVhY2hlclBhZ2UiLAogIHByb3BzOiB7CiAgICBjdXJhdG9yOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE5vdGlmaWNhdGlvbnMsCiAgICBUZWFjaGVyQ2FyZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxlc3NvbnM6IFtdLAogICAgICByZXNlcnZlZF90aW1lczogW10sCiAgICAgIGRheXNPZmY6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKFsiQUREX05PVElGSUNBVElPTiIsICJTSE9XX01PREFMIl0pLAogICAgY2FsZW5kYXJFdmVudChkYXRhKSB7CiAgICAgIGNvbnN0IGN1cmF0b3IgPSB7CiAgICAgICAgaWQ6IHRoaXMuY3VyYXRvci5pZCwKICAgICAgICBwaG90bzogdGhpcy5jdXJhdG9yLnBob3RvLAogICAgICAgIGZpcnN0X25hbWU6IHRoaXMuY3VyYXRvci5maXJzdF9uYW1lLAogICAgICAgIGxhc3RfbmFtZTogdGhpcy5jdXJhdG9yLmxhc3RfbmFtZSwKICAgICAgICBhYm91dDogdGhpcy5jdXJhdG9yLmFib3V0CiAgICAgIH07CiAgICAgIC8vIGNvbnN0IHsgZGF5cyB9ID0gdGhpcy5jdXJhdG9yOwogICAgICBpZiAoZGF0YS50eXBlLm5hbWUgPT0gImFkZC1sZXNzb24iKSB7CiAgICAgICAgY29uc3QgcmVzZXJ2ZWRfZm9yX2RheSA9IHRoaXMucmVzZXJ2ZWRfdGltZXMuZmlsdGVyKAogICAgICAgICAgbGVzc29uID0+IGxlc3Nvbi5kYXkgPT09IGRhdGEuZGF0ZS5mdWxsRGF0ZQogICAgICAgICk7CiAgICAgICAgY29uc3QgRGF0YUZvck1vZGFsID0gewogICAgICAgICAgY3VyYXRvcjogY3VyYXRvciwKICAgICAgICAgIGRheTogZGF0YS5kYXRlLmZ1bGxEYXRlCiAgICAgICAgfTsKICAgICAgICByZXNlcnZlZF9mb3JfZGF5Lmxlbmd0aCA+IDAKICAgICAgICAgID8gKERhdGFGb3JNb2RhbC5yZXNlcnZlZCA9IHJlc2VydmVkX2Zvcl9kYXkpCiAgICAgICAgICA6IFtdOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93X3Jlc2VydmF0aW9uX2xlc3Nvbl9tb2RhbCIsIHsKICAgICAgICAgIGRhdGE6IERhdGFGb3JNb2RhbCwKICAgICAgICAgIG1vZGFsX25hbWU6ICJyZXNlcnZhdGlvbi1sZXNzb24iCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlLm5hbWUgPT0gImxlc3NvbnMtbW9kYWwiKSB7CiAgICAgICAgLy8gZGF5cy5maWx0ZXIoKQogICAgICAgIC8vIGNvbnN0IERhdGFGb3JNb2RhbCA9IHsKICAgICAgICAvLyAgIGN1cmF0b3I6IHsKICAgICAgICAvLyAgICAgaWQ6IHRoaXMuY3VyYXRvci5pZCwKICAgICAgICAvLyAgICAgcGhvdG86IHRoaXMuY3VyYXRvci5waG90bywKICAgICAgICAvLyAgICAgZmlyc3RfbmFtZTogdGhpcy5jdXJhdG9yLmZpcnN0X25hbWUsCiAgICAgICAgLy8gICAgIGxhc3RfbmFtZTogdGhpcy5jdXJhdG9yLmxhc3RfbmFtZSwKICAgICAgICAvLyAgIH0sCiAgICAgICAgLy8gICAvLyBmdWxsX3RpbWVfZnJvbToKICAgICAgICAvLyB9CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgdGhpcy5TSE9XX01PREFMKCJsZXNzb25zLW1vZGFsIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm5vdGlmaWNhdGlvbnMvYWRkX25vdGlmaWNhdGlvbiIsIHsKICAgICAgICAgIHR5cGU6ICJkYW5nZXIiLAogICAgICAgICAgdGV4dDogItCX0LDQvdGP0YLQuNC1INGBINC/0YDQtdC/0L7QtNCw0LLQsNGC0LXQu9C10Lwg0LIg0Y3RgtC+0YIg0LTQtdC90Ywg0L3QtdCy0L7Qt9C80L7QttC90L4uIgogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbGVzc29uc19hcnJheSgpIHsKICAgICAgcmV0dXJuIHRoaXMubGVzc29uczsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCB7IGRheXMsIGRheV9vZmYsIHRpbWVfb2ZmIH0gPSB0aGlzLmN1cmF0b3I7CiAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgIGNvbnN0IHVzZXJfaWQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJ1c2VyL3VzZXJfaWQiXTsKICAgIGNvbnN0IHJlc2VydmVkX3RpbWVzID0gW107CiAgICBkYXlzLmZvckVhY2goZGF5ID0+IHsKICAgICAgY29uc3QgaXNfdXNlcl9sZXNzb25zID0KICAgICAgICBkYXkudGltZXMuZmlsdGVyKHRpbWUgPT4gdGltZS51c2VyX2lkID09PSB1c2VyX2lkKS5sZW5ndGggPiAwOwogICAgICBpZiAoaXNfdXNlcl9sZXNzb25zKSB7CiAgICAgICAgcmVzdWx0LnB1c2goeyBkYXk6IGRheS5kYXksIGlkOiBkYXkuaWQgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF5LnRpbWVzLmZvckVhY2goCiAgICAgICAgICAoeyBpZCwgaG91cl9mcm9tLCBob3VyX3RvLCBtaW51dGVfZnJvbSwgbWludXRlX3RvIH0pID0+IHsKICAgICAgICAgICAgcmVzZXJ2ZWRfdGltZXMucHVzaCh7CiAgICAgICAgICAgICAgZGF5OiBkYXkuZGF5LAogICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICBmcm9tSG91cjogaG91cl9mcm9tLAogICAgICAgICAgICAgIGZyb21NaW51dGVzOiBtaW51dGVfZnJvbSwKICAgICAgICAgICAgICB0b0hvdXI6IGhvdXJfdG8sCiAgICAgICAgICAgICAgdG9NaW51dGVzOiBtaW51dGVfdG8gKyA1CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgZGF5T2ZmID0gZGF5X29mZi5tYXAoKHsgY2FsZW5kYXJfZGF5IH0pID0+IGNhbGVuZGFyX2RheSk7CgogICAgdGltZV9vZmYuZm9yRWFjaCgoeyBjYWxlbmRhcl9kYXksIGhvdXJfZnJvbSwgbWludXRlX2Zyb20sIGhvdXJfdG8sIG1pbnV0ZV90byB9KSA9PiB7CiAgICAgIHJlc2VydmVkX3RpbWVzLnB1c2goewogICAgICAgIGRheTogY2FsZW5kYXJfZGF5LAogICAgICAgIGlkOiBjYWxlbmRhcl9kYXksCiAgICAgICAgZnJvbUhvdXI6ICtob3VyX2Zyb20sCiAgICAgICAgZnJvbU1pbnV0ZXM6ICttaW51dGVfZnJvbSwKICAgICAgICB0b0hvdXI6ICtob3VyX3RvLAogICAgICAgIHRvTWludXRlczogK21pbnV0ZV90byArIDUKICAgICAgfSkKICAgIH0pCiAgICB0aGlzLmRheXNPZmYgPSBkYXlPZmY7CiAgICB0aGlzLmxlc3NvbnMgPSByZXN1bHQ7CiAgICB0aGlzLnJlc2VydmVkX3RpbWVzID0gcmVzZXJ2ZWRfdGltZXM7CiAgfQp9Owo="},{"version":3,"sources":["TeacherPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeacherPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"c-teacher-page\">\n    <div class=\"c-teacher-page__header\">\n      <router-link :to=\"{ name: 'HomePage' }\" class=\"c-teacher-page__back\">\n        <svg\n          width=\"8\"\n          height=\"13\"\n          viewBox=\"0 0 8 13\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M7 12L1 6.5L7 1\"\n            stroke=\"#4B4B4B\"\n            stroke-width=\"1.5\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          />\n        </svg>\n        <span>Назад</span>\n      </router-link>\n    </div>\n    <div class=\"c-teacher-page__teacher-card\">\n      <TeacherCard\n        :curator=\"curator\"\n        :hideContentOnClick=\"false\"\n        class=\"open\"\n      />\n    </div>\n    <div class=\"c-teacher-page__calendar\">\n      <BaseCalendar\n        :lessons=\"lessons_array\"\n        :daysOff=\"daysOff\"\n        @click=\"calendarEvent\"\n      />\n    </div>\n    <Notifications />\n  </div>\n</template>\n\n<script>\nimport TeacherCard from \"@/components/TeacherCard.vue\";\nimport { mapMutations } from \"vuex\";\nimport Notifications from \"../components/Notifications\";\nexport default {\n  name: \"TeacherPage\",\n  props: {\n    curator: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    Notifications,\n    TeacherCard\n  },\n  data() {\n    return {\n      lessons: [],\n      reserved_times: [],\n      daysOff: []\n    };\n  },\n  methods: {\n    ...mapMutations([\"ADD_NOTIFICATION\", \"SHOW_MODAL\"]),\n    calendarEvent(data) {\n      const curator = {\n        id: this.curator.id,\n        photo: this.curator.photo,\n        first_name: this.curator.first_name,\n        last_name: this.curator.last_name,\n        about: this.curator.about\n      };\n      // const { days } = this.curator;\n      if (data.type.name == \"add-lesson\") {\n        const reserved_for_day = this.reserved_times.filter(\n          lesson => lesson.day === data.date.fullDate\n        );\n        const DataForModal = {\n          curator: curator,\n          day: data.date.fullDate\n        };\n        reserved_for_day.length > 0\n          ? (DataForModal.reserved = reserved_for_day)\n          : [];\n        this.$store.dispatch(\"show_reservation_lesson_modal\", {\n          data: DataForModal,\n          modal_name: \"reservation-lesson\"\n        });\n      } else if (data.type.name == \"lessons-modal\") {\n        // days.filter()\n        // const DataForModal = {\n        //   curator: {\n        //     id: this.curator.id,\n        //     photo: this.curator.photo,\n        //     first_name: this.curator.first_name,\n        //     last_name: this.curator.last_name,\n        //   },\n        //   // full_time_from:\n        // }\n        console.log(data);\n        this.SHOW_MODAL(\"lessons-modal\");\n      } else {\n        this.$store.dispatch(\"notifications/add_notification\", {\n          type: \"danger\",\n          text: \"Занятие с преподавателем в этот день невозможно.\"\n        });\n      }\n    }\n  },\n  computed: {\n    lessons_array() {\n      return this.lessons;\n    }\n  },\n  created() {\n    const { days, day_off, time_off } = this.curator;\n    const result = [];\n    const user_id = this.$store.getters[\"user/user_id\"];\n    const reserved_times = [];\n    days.forEach(day => {\n      const is_user_lessons =\n        day.times.filter(time => time.user_id === user_id).length > 0;\n      if (is_user_lessons) {\n        result.push({ day: day.day, id: day.id });\n      } else {\n        day.times.forEach(\n          ({ id, hour_from, hour_to, minute_from, minute_to }) => {\n            reserved_times.push({\n              day: day.day,\n              id: id,\n              fromHour: hour_from,\n              fromMinutes: minute_from,\n              toHour: hour_to,\n              toMinutes: minute_to + 5\n            });\n          }\n        );\n      }\n    });\n    const dayOff = day_off.map(({ calendar_day }) => calendar_day);\n\n    time_off.forEach(({ calendar_day, hour_from, minute_from, hour_to, minute_to }) => {\n      reserved_times.push({\n        day: calendar_day,\n        id: calendar_day,\n        fromHour: +hour_from,\n        fromMinutes: +minute_from,\n        toHour: +hour_to,\n        toMinutes: +minute_to + 5\n      })\n    })\n    this.daysOff = dayOff;\n    this.lessons = result;\n    this.reserved_times = reserved_times;\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.c-teacher-page {\n  @extend %pagept;\n  // .c-teacher-page__header\n  .teacher__arrow {\n    display: none;\n  }\n  &__header {\n    margin-bottom: rem(32);\n  }\n\n  // .c-teacher-page__back\n\n  &__back {\n    @extend %btn-text;\n    color: $gray;\n    transition: all 0.5s ease;\n    svg {\n      margin-right: 10px;\n      path {\n        transition: all 0.5s ease;\n      }\n    }\n    &:hover {\n      color: $green;\n      svg {\n        path {\n          stroke: $green;\n        }\n      }\n    }\n  }\n\n  // .c-teacher-page__teacher-card\n\n  &__teacher-card {\n    margin-bottom: rem(70);\n  }\n\n  // .c-teacher-page__calendar\n\n  &__calendar {\n  }\n}\n.open {\n}\n@include bp(1100px) {\n  .c-teacher-page {\n    padding: 50px 0 0 0;\n    margin: 0 auto;\n    max-width: 750px;\n  }\n}\n@include bp(766px) {\n  .c-teacher-page {\n    max-width: 320px;\n  }\n}\n</style>\n"]}]}