{"remainingRequest":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\src\\views\\CheckoutPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\src\\views\\CheckoutPage.vue","mtime":1625895133509},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgbG9hZFN0cmlwZSB9IGZyb20gIkBzdHJpcGUvc3RyaXBlLWpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDaGVja291dFBhZ2UiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b3RhbDogMCwKICAgICAgZHVyYXRpb246IG51bGwsCiAgICAgIGxlc3NvbnM6IG51bGwsCiAgICAgIHRlYWNoZXI6IG51bGwsCiAgICAgIGV4YWN0OiB7fSwKICAgICAga2V5OiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyJvZmZlcnMiXSksCiAgICBwbGFuKCkgewogICAgICByZXR1cm4gdGhpcy5vZmZlcnMuZmlsdGVyKHBsYW4gPT4gcGxhbi5pZCA9PSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpWzBdOwogICAgfSwKICAgIHBhY2tzKCkgewogICAgICBjb25zdCBsZXNzb25zID0gSlNPTi5wYXJzZSh0aGlzLnBsYW4uanNvbik7CiAgICAgIHJldHVybiBsZXNzb25zLm1hcChpdGVtID0+IHsKICAgICAgICBjb25zdCBkID0gaXRlbS50aW1lOwogICAgICAgIGNvbnN0IHF0eSA9IGl0ZW0uY291bnQ7CiAgICAgICAgY29uc3QgcCA9IGl0ZW0ucHJpY2U7CiAgICAgICAgY29uc3Qga2V5ID0gaXRlbS5rZXk7CiAgICAgICAgLy8gY29uc3QgdCA9IGl0ZW0udHlwZTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dDogYCR7cXR5fSAvINCU0LvQuNGC0LXQu9GM0L3QvtGB0YLRjDogJHtkfSDQvNC40L0uYCwKICAgICAgICAgIHZhbDogYCR7cH0rJHtrZXl9YAogICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgb25TdWJtaXQoKSB7CiAgICAgIGNvbnN0IHsgcHVibGljS2V5LCBzZXNzaW9uSWQgfSA9IGF3YWl0IHRoaXMubWFrZUNoZWNrb3V0Rm9yUGFja2V0KHsKICAgICAgICBwYWNrZXRfaWQ6IHRoaXMucGxhbi5pZCwKICAgICAgICBrZXk6IHRoaXMua2V5CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyhwdWJsaWNLZXkpOwogICAgICBjb25zb2xlLmxvZyhzZXNzaW9uSWQpOwogICAgICBjb25zdCBzdHJpcGUgPSBhd2FpdCBsb2FkU3RyaXBlKHB1YmxpY0tleSk7CiAgICAgIGNvbnNvbGUubG9nKHN0cmlwZSk7CiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN0cmlwZS5yZWRpcmVjdFRvQ2hlY2tvdXQoeyBzZXNzaW9uSWQgfSk7CgogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiUHVyY2hhc2VTdWNjZXNzIiB9KTsKICAgIH0sCiAgICBvbklucChlKSB7CiAgICAgIHRoaXMudG90YWwgPSBlLnNwbGl0KCIrIilbMF07CiAgICAgIHRoaXMua2V5ID0gZS5zcGxpdCgiKyIpWzFdOwogICAgfSwKICAgIC4uLm1hcEFjdGlvbnMoInVzZXIiLCBbIm1ha2VDaGVja291dCIsICJtYWtlQ2hlY2tvdXRGb3JQYWNrZXQiXSkKICAgIC8vIC4uLm1hcEFjdGlvbnMoWydnZXRfc2luZ2xlX29mZmVyJ10pLAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMucGFja3NbMF0udmFsLnNwbGl0KCIrIilbMF0pOwogICAgdGhpcy50b3RhbCA9IHRoaXMucGFja3NbMF0udmFsLnNwbGl0KCIrIilbMF07CiAgfQogIC8vIGFzeW5jIGNyZWF0ZWQoKSB7CiAgLy8gICB0aGlzLmV4YWN0ID0gYXdhaXQgdGhpcy5nZXRfc2luZ2xlX29mZmVyKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgLy8gfQp9Owo="},{"version":3,"sources":["CheckoutPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CheckoutPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"c-checkout\">\n    <div class=\"c-checkout__wrap c-checkout__wrap_left\">\n      <figure class=\"c-checkout__img\">\n        <img src=\"@/assets/img/ill/buy-plan/header-cat.svg\" alt=\"\" />\n        <img :src=\"plan.ill\" alt=\"\" />\n        <img\n          :src=\"`https://work.studiait.it/storage/${plan.cover}`\"\n          :alt=\"plan.name\"\n        />\n      </figure>\n      <p class=\"c-checkout__text\">\n        {{ plan.description }}\n      </p>\n      <ul class=\"c-checkout__adtantages\">\n        <li\n          class=\"c-checkout__adv-item\"\n          v-for=\"itm of plan.advantages.split('\\n')\"\n          :key=\"itm\"\n        >\n          <figure class=\"c-checkout__adv-img\">\n            <img src=\"@/assets/img/ill/notifications/alert-great.svg\" alt=\"\" />\n          </figure>\n          <p class=\"c-checkout__adv-text\">\n            {{ itm }}\n          </p>\n        </li>\n      </ul>\n      <!-- <a :href=\"plan.link\" class=\"c-checkout__learn-more\">\n        <span>Подробнее</span>\n      </a> -->\n    </div>\n    <div class=\"c-checkout__wrap c-checkout__wrap_right\">\n      <form class=\"c-checkout__form\" @submit.prevent=\"onSubmit\">\n        <!-- <div class=\"c-checkout__form-discount\">\n          Скидка - {{ plan.discount }}%\n        </div> -->\n        <div class=\"c-checkout__form-small-title\">Пакет занятий</div>\n        <h1 class=\"c-checkout__form-title\">\n          {{ plan.name }}\n        </h1>\n        <div class=\"c-checkout__form-wrap\">\n          <h3 class=\"c-checkout__form-subtitle\">\n            Выберете удобную конфигурацию\n          </h3>\n          <div class=\"c-checkout__form-select-wrapper\">\n            <div class=\"c-checkout__form-wrappers\">\n              <!-- <div\n                class=\"c-checkout__form-select c-checkout__form-select_duration\"\n              >\n                <h4 class=\"c-checkout__form-select-title\">\n                  Длительность\n                </h4>\n                <BaseSelect\n                  :placeholder=\"select_duration[0].text\"\n                  :options=\"select_duration\"\n                  v-model=\"duration\"\n                />\n              </div> -->\n              <div\n                class=\"c-checkout__form-select c-checkout__form-select_quanity\"\n              >\n                <h4 class=\"c-checkout__form-select-title\">Кол-во занятий</h4>\n                <BaseSelect\n                  :options=\"packs\"\n                  :placeholder=\"packs[0].text\"\n                  v-model=\"lessons\"\n                  @input=\"onInp\"\n                />\n              </div>\n            </div>\n            <!-- <div\n              class=\"c-checkout__form-select c-checkout__form-select_teacher\"\n            >\n              <BaseSelect\n                placeholder=\"Тип преподавателя\"\n                :options=\"select_teacher\"\n                v-model=\"teacher\"\n              />\n            </div> -->\n          </div>\n          <div class=\"c-checkout__form-total\">\n            <h4 class=\"c-checkout__form-total-title\">К оплате:</h4>\n            <p class=\"c-checkout__form-total-price\">{{ total }} €</p>\n          </div>\n          <button class=\"c-checkout__form-btn\">\n            <span>Выбрать пакет</span>\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nexport default {\n  name: \"CheckoutPage\",\n  data() {\n    return {\n      total: 0,\n      duration: null,\n      lessons: null,\n      teacher: null,\n      exact: {},\n      key: 0\n    };\n  },\n  computed: {\n    ...mapGetters([\"offers\"]),\n    plan() {\n      return this.offers.filter(plan => plan.id == this.$route.params.id)[0];\n    },\n    packs() {\n      const lessons = JSON.parse(this.plan.json);\n      return lessons.map(item => {\n        const d = item.time;\n        const qty = item.count;\n        const p = item.price;\n        const key = item.key;\n        // const t = item.type;\n        return {\n          text: `${qty} / Длительность: ${d} мин.`,\n          val: `${p}+${key}`\n        };\n      });\n    }\n  },\n  methods: {\n    async onSubmit() {\n      const { publicKey, sessionId } = await this.makeCheckoutForPacket({\n        packet_id: this.plan.id,\n        key: this.key\n      });\n      console.log(publicKey);\n      console.log(sessionId);\n      const stripe = await loadStripe(publicKey);\n      console.log(stripe);\n      const { error } = await stripe.redirectToCheckout({ sessionId });\n\n      if (error) {\n        console.log(error);\n      }\n      // this.$router.push({ name: \"PurchaseSuccess\" });\n    },\n    onInp(e) {\n      this.total = e.split(\"+\")[0];\n      this.key = e.split(\"+\")[1];\n    },\n    ...mapActions(\"user\", [\"makeCheckout\", \"makeCheckoutForPacket\"])\n    // ...mapActions(['get_single_offer']),\n  },\n  created() {\n    console.log(this.packs[0].val.split(\"+\")[0]);\n    this.total = this.packs[0].val.split(\"+\")[0];\n  }\n  // async created() {\n  //   this.exact = await this.get_single_offer(this.$route.params.id);\n  // }\n};\n</script>\n\n<style lang=\"scss\">\n.c-checkout {\n  @extend %df;\n  @extend %jcsb;\n  padding-top: rem(36);\n  padding-left: rem(49);\n  max-width: rem(922);\n  padding-bottom: 50px;\n  // .c-checkout__wrap\n\n  &__wrap {\n    // .c-checkout__wrap_left\n\n    &_left {\n    }\n\n    // .c-checkout__wrap_right\n\n    &_right {\n    }\n  }\n\n  // .c-checkout__img\n\n  &__img {\n    // @extend %df;\n    // @extend %fdc;\n    img {\n      display: block;\n      &:last-child {\n        min-width: rem(157);\n        margin-top: rem(13);\n      }\n    }\n  }\n\n  // .c-checkout__text\n\n  &__text {\n    @extend %text-middle;\n    color: $gray;\n    margin-top: rem(60);\n    max-width: rem(450);\n    margin-bottom: rem(34);\n  }\n\n  // .c-checkout__adtantages\n\n  &__adtantages {\n  }\n\n  // .c-checkout__adv-item\n\n  &__adv-item {\n    @extend %df;\n    align-items: flex-end;\n    margin-bottom: rem(19);\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  // .c-checkout__adv-img\n\n  &__adv-img {\n    width: rem(23);\n    height: rem(23);\n  }\n\n  // .c-checkout__adv-text\n\n  &__adv-text {\n    @extend %text-big;\n    color: $green;\n    margin-left: rem(8);\n  }\n\n  // .c-checkout__learn-more\n\n  &__learn-more {\n    @extend %simple-btn-white;\n    width: rem(180);\n    margin-top: rem(52);\n    margin-left: rem(4);\n  }\n\n  // .c-checkout__form\n\n  &__form {\n    position: relative;\n    width: rem(363);\n    height: rem(567);\n    background-color: $dark_white;\n    border-radius: 2px;\n    overflow: hidden;\n    padding: rem(44) rem(33) 0 rem(34);\n  }\n\n  // .c-checkout__form-discount\n\n  &__form-discount {\n    position: absolute;\n    top: 0;\n    right: 0;\n    border-radius: 0 2px 0 0;\n    @extend %text-small;\n    color: $green;\n    border: 1px solid $green;\n    padding: rem(6);\n  }\n\n  // .c-checkout__form-small-title\n\n  &__form-small-title {\n    @extend %text-small;\n    color: $gray;\n  }\n\n  // .c-checkout__form-title\n\n  &__form-title {\n    @extend %h2-title-regular;\n    color: $black;\n    margin: rem(3) 0 rem(34) 0;\n  }\n\n  // .c-checkout__form-wrap\n\n  &__form-wrap {\n  }\n\n  // .c-checkout__form-subtitle\n\n  &__form-subtitle {\n    @extend %text-middle;\n    color: $black;\n  }\n\n  // .c-checkout__form-select-wrapper\n\n  &__form-select-wrapper {\n    margin: rem(19) 0 0 0;\n  }\n\n  // .c-checkout__form-wrappers\n\n  &__form-wrappers {\n    @extend %df;\n    @extend %jcsb;\n    margin-bottom: rem(13);\n  }\n\n  // .c-checkout__form-select\n\n  &__form-select {\n    // .c-checkout__form-select_duration\n\n    &_duration,\n    &_quanity {\n      position: relative;\n      z-index: 3;\n      .select {\n        width: 100%;\n        height: rem(49);\n        &__wrapper,\n        &__wrap-val {\n          height: inherit;\n        }\n        &__options {\n          width: 101.5%;\n        }\n      }\n    }\n\n    // .c-checkout__form-select_quanity\n\n    &_quanity {\n    }\n\n    // .c-checkout__form-select_teacher\n\n    &_teacher {\n      .select {\n        width: 100%;\n        height: rem(49);\n        &__wrapper,\n        &__wrap-val {\n          height: inherit;\n        }\n        &__options {\n          width: 100.6%;\n        }\n      }\n    }\n  }\n\n  // .c-checkout__form-select-title\n\n  &__form-select-title {\n    @extend %text-small-big-line-height;\n    color: $gray;\n    margin-bottom: rem(8);\n  }\n\n  // .c-checkout__form-total\n\n  &__form-total {\n    @extend %df;\n    @extend %jcsb;\n    align-items: flex-end;\n    margin: rem(41) 0 rem(43) 0;\n  }\n\n  // .c-checkout__form-total-title\n\n  &__form-total-title {\n    @extend %text-big;\n    color: $gray;\n  }\n\n  // .c-checkout__form-total-price\n\n  &__form-total-price {\n    @extend %h3-title-bold;\n    color: $green;\n  }\n\n  // .c-checkout__form-btn\n\n  &__form-btn {\n    @extend %simple-btn-red-fill;\n    width: 296px;\n  }\n}\n@include bp(1100px) {\n  .c-checkout {\n    max-width: 750px;\n    margin: 0 auto;\n    padding: 50px 0 0 0;\n    &__wrap {\n      &_left {\n        max-width: 370px;\n      }\n    }\n    &__adv-item {\n      align-items: flex-start;\n    }\n  }\n}\n@include bp(766px) {\n  .c-checkout {\n    max-width: 320px;\n    margin-bottom: 50px;\n    flex-direction: column;\n    &__wrap {\n      &_left {\n        margin-bottom: 50px;\n      }\n    }\n    &__form {\n      width: 100%;\n      padding: 32px;\n      height: auto;\n      &-discount {\n        font-size: rem(10);\n        line-height: rem(10);\n        padding: 0;\n        width: 77px;\n        height: 23px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n      &-title {\n        font-size: rem(22);\n        line-height: rem(25);\n      }\n      &-subtitle {\n        font-size: rem(12);\n        line-height: rem(18);\n      }\n      &-select {\n        &_duration,\n        &_quanity {\n          .select {\n            width: 120px;\n          }\n        }\n        &-title {\n          font-size: rem(10);\n          line-height: rem(14);\n        }\n      }\n      &-total-title {\n        font-size: rem(14);\n        line-height: rem(14);\n      }\n      &-total-price {\n        font-size: rem(16);\n        line-height: rem(17);\n      }\n      &-btn {\n        width: 100%;\n        height: 35px;\n        font-size: rem(12);\n        line-height: rem(16);\n      }\n    }\n  }\n}\n</style>\n"]}]}