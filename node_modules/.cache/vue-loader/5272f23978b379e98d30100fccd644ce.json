{"remainingRequest":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\src\\components\\TimeSlider.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\src\\components\\TimeSlider.vue","mtime":1625895131331},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\tamer\\Desktop\\MAIN\\studiait-front-old\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYy10aW1lLXNsaWRlciB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKCiAgJl9fYmFja2dyb3VuZCB7CiAgICBAZXh0ZW5kICVkZjsKICAgIGhlaWdodDogNTlweDsKICAgIHotaW5kZXg6IC0xOwogICAgcGFkZGluZy10b3A6IDJweDsKICB9CgogICZfX2hvdXIgewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDEyLCAxZnIpOwogIH0KCiAgJl9fbWludXRlIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWZmZWE7CiAgICBoZWlnaHQ6IDYwcHg7CgogICAgJi0tcmVzZXJ2ZWQgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRlZmVlOwogICAgfQogIH0KCiAgJl9fdGltZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBoZWlnaHQ6IDYwcHg7CiAgICBjb2xvcjogJGdyZWVuOwogICAgYm9yZGVyOiAycHggc29saWQgJGdyZWVuOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZm9udC1zaXplOiAxNHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwoKICAgICYtLXJlc2VydmVkIHsKICAgICAgY29sb3I6ICRyZWQ7CiAgICAgIGJvcmRlcjogMnB4IHNvbGlkICRyZWQ7CiAgICB9CiAgfQoKICAmX19yYW5nZSB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgfQoKICAmX19zcXVhcmUtdGl0bGUgewogICAgZm9udC1zaXplOiAwLjdyZW07CiAgfQoKICAmX190aW1lbGluZSB7CiAgICBAZXh0ZW5kICVkZjsKICAgIEBleHRlbmQgJWpjc2I7CiAgICBAZXh0ZW5kICV0ZXh0LXNtYWxsLWJpZy1saW5lLWhlaWdodDsKICAgIGNvbG9yOiAkZ3JheTsKICB9Cn0KQGluY2x1ZGUgYnAoNzY2cHgpIHsKfQo="},{"version":3,"sources":["TimeSlider.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeSlider.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"c-time-slider\">\n    <div class=\"c-time-slider__range\" ref=\"range\">\n      <div class=\"c-time-slider__background\">\n        <div\n          class=\"c-time-slider__hour\"\n          :key=\"`h_${hour.num}`\"\n          v-for=\"hour in hours\"\n        >\n          <div\n            :class=\"{\n              'c-time-slider__minute--reserved': checkReserved(hour.num, minute)\n            }\"\n            class=\"c-time-slider__minute\"\n            :style=\"{ width: `${minuteBlockPixels}px` }\"\n            v-for=\"minute in hour.minutes\"\n            :key=\"`h_${hour.num}_${minute}`\"\n          ></div>\n        </div>\n      </div>\n      <div\n        :style=\"{ width: `${actualTimePixels}px` }\"\n        class=\"c-time-slider__time\"\n        :class=\"{ 'c-time-slider__time--reserved': isReserved }\"\n        @mousedown.prevent=\"moveTime\"\n      ></div>\n    </div>\n    <div class=\"c-time-slider__timeline\">\n      <div\n        class=\"c-time-slider__timeline-time\"\n        :key=\"`hl_${hour.num}`\"\n        v-for=\"hour in hours\"\n      >\n        {{ hour.num }}:00\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    lessonTime: {\n      type: Number,\n      default: 60\n    },\n    reservedTime: {\n      type: Array,\n      default: () => {\n        return [];\n      }\n    }\n  },\n  data() {\n    return {\n      currentLeft: 0,\n      pixelPerMinute: 1,\n      minutesPerBlock: 5,\n      hourFrom: 9,\n      hourTo: 19\n    };\n  },\n  computed: {\n    hours() {\n      const hours = [];\n\n      for (let i = this.hourFrom; i <= this.hourTo; i++) {\n        const hour = {\n          num: i,\n          minutes: []\n        };\n\n        if (i !== this.hourTo) {\n          for (let j = 0; j < 60; j += this.minutesPerBlock) {\n            hour.minutes.push(j);\n          }\n        }\n\n        hours.push(hour);\n      }\n\n      return hours;\n    },\n    offsetAllMinutes() {\n      return this.currentLeft / this.pixelPerMinute;\n    },\n    offsetMinutes() {\n      return this.offsetAllMinutes - this.offsetHours * 60;\n    },\n    offsetHours() {\n      return Math.floor(this.offsetAllMinutes / 60);\n    },\n    timeFromHour() {\n      return this.hourFrom + this.offsetHours;\n    },\n    timeFrom() {\n      const hours =\n        this.timeFromHour < 10 ? `0${this.timeFromHour}` : this.timeFromHour;\n      const minutes =\n        this.offsetMinutes < 10 ? `0${this.offsetMinutes}` : this.offsetMinutes;\n\n      return `${hours}:${minutes}`;\n    },\n    timeToHour() {\n      const offsetAllMinutes = this.offsetAllMinutes + this.lessonTime;\n\n      const hour = Math.floor(offsetAllMinutes / 60);\n\n      return this.hourFrom + hour;\n    },\n    timeToMinute() {\n      const offsetAllMinutes = this.offsetAllMinutes + this.lessonTime;\n\n      const hour = Math.floor(offsetAllMinutes / 60);\n      return offsetAllMinutes - hour * 60;\n    },\n    isReserved() {\n      const minutesFrom = this.offsetAllMinutes + this.hourFrom * 60;\n      const minutesTo = minutesFrom + this.lessonTime;\n\n      return (\n        this.reservedTime.find(foundTime => {\n          const minutesReserveFrom =\n            foundTime.fromHour * 60 + foundTime.fromMinutes;\n          const minutesReserveTo =\n            foundTime.toHour * 60 + foundTime.toMinutes + 5;\n\n          if (\n            minutesFrom >= minutesReserveFrom &&\n            minutesFrom <= minutesReserveTo\n          ) {\n            return true;\n          }\n\n          return (\n            minutesTo >= minutesReserveFrom && minutesTo <= minutesReserveTo\n          );\n        }) !== undefined\n      );\n    },\n    timeTo() {\n      const hours =\n        this.timeToHour < 10 ? `0${this.timeToHour}` : this.timeToHour;\n      const minutes =\n        this.timeToMinute < 10 ? `0${this.timeToMinute}` : this.timeToMinute;\n\n      return `${hours}:${minutes}`;\n    },\n    actualTimePixels() {\n      return this.lessonTime * this.pixelPerMinute;\n    },\n    minuteBlockPixels() {\n      return this.pixelPerMinute * this.minutesPerBlock;\n    }\n  },\n  methods: {\n    checkReserved(hour, minute) {\n      const minutes = hour * 60 + minute;\n\n      return this.reservedTime.find(foundTime => {\n        const minutesReserveFrom =\n          foundTime.fromHour * 60 + foundTime.fromMinutes;\n        const minutesReserveTo =\n          foundTime.toHour * 60 + foundTime.toMinutes + 5;\n\n        return minutes >= minutesReserveFrom && minutes <= minutesReserveTo;\n      });\n    },\n    moveTime(event) {\n      const timeEl =\n        event.target.localName === \"span\"\n          ? event.target.parentNode\n          : event.target;\n      let slider = this.$refs.range;\n      let shiftX = event.clientX - timeEl.getBoundingClientRect().left;\n      // let oldLeft = null;\n      // const isInteger = (num) => {\n      //   return (num ^ 0) === num\n      // }\n      const onMouseMove = event => {\n        let newLeft =\n          event.clientX - shiftX - slider.getBoundingClientRect().left;\n\n        // isInteger(test) ? newLeft : newLeft += 5;\n        if (newLeft < 0) {\n          newLeft = 0;\n        }\n\n        let rightEdge = slider.offsetWidth - timeEl.offsetWidth;\n        if (newLeft > rightEdge) {\n          newLeft = rightEdge;\n        }\n\n        timeEl.style.left = newLeft + \"px\";\n        this.currentLeft = newLeft;\n        this.update();\n      };\n\n      const onMouseUp = () => {\n        document.removeEventListener(\"mouseup\", onMouseUp);\n        document.removeEventListener(\"mousemove\", onMouseMove);\n        this.update();\n      };\n\n      document.addEventListener(\"mousemove\", onMouseMove);\n      document.addEventListener(\"mouseup\", onMouseUp);\n    },\n    update() {\n      this.$emit(\"input\", {\n        from: {\n          hour: this.timeFromHour,\n          minutes: this.offsetMinutes,\n          time: this.timeFrom\n        },\n        to: {\n          hour: this.timeToHour,\n          minutes: this.timeToMinute,\n          time: this.timeTo\n        },\n        isReserved: this.isReserved\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.c-time-slider {\n  position: relative;\n  display: inline-block;\n\n  &__background {\n    @extend %df;\n    height: 59px;\n    z-index: -1;\n    padding-top: 2px;\n  }\n\n  &__hour {\n    display: grid;\n    grid-template-columns: repeat(12, 1fr);\n  }\n\n  &__minute {\n    background-color: #f1ffea;\n    height: 60px;\n\n    &--reserved {\n      background-color: #fdefee;\n    }\n  }\n\n  &__time {\n    position: absolute;\n    top: 0;\n    height: 60px;\n    color: $green;\n    border: 2px solid $green;\n    box-sizing: border-box;\n    display: flex;\n    text-align: center;\n    align-items: center;\n    font-size: 14px;\n    cursor: pointer;\n\n    &--reserved {\n      color: $red;\n      border: 2px solid $red;\n    }\n  }\n\n  &__range {\n    display: inline-block;\n  }\n\n  &__square-title {\n    font-size: 0.7rem;\n  }\n\n  &__timeline {\n    @extend %df;\n    @extend %jcsb;\n    @extend %text-small-big-line-height;\n    color: $gray;\n  }\n}\n@include bp(766px) {\n}\n</style>\n"]}]}